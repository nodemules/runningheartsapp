<md-content layout="column">
  <md-card md-theme="{{ showDarkTheme ? 'dark-grey' : 'default' }}" md-theme-watch>
    <md-card-title>
      <md-card-title-text>
        <span class="md-headline player-info">
            {{pv.player.name}}
            <md-subheader ng-show="pv.player.statusId == 2">(Inactive)</md-subheader>
          </span>
        <span class="md-subhead player-info">{{pv.player.isTd ? 'Tournament Director' : ''}}</span>
        <md-switch ng-model="pv.stats.currentSeason" ng-show="!pv.stats.specificSeason" ng-change="pv.getPlayerStats(pv.stats.currentSeason)">Show Current Season Stats</md-switch>
        <md-button class="md-raised md-secondary" ng-click="pv.getPlayerStats(true)" ng-show="pv.stats.specificSeason">Show Current Season Stats</md-button>
      </md-card-title-text>
    </md-card-title>
    <md-card-content>
      <center>
        <h3 ng-show="!pv.stats.specificSeason">{{pv.stats.currentSeason ? 'Current Season' : 'All Time'}}</h3>
        <h3 ng-show="pv.stats.specificSeason">Season {{pv.stats.seasonNumber}}</h3>
      </center>
      <p ng-show="!pv.player.games.length">This player hasn't played any games yet<span ng-show="pv.stats.currentSeason"> this season</span>!</p>
      <div ng-show="pv.player.games.length">
        <p>Total Points: {{pv.player.totalPoints}}</p>
        <p>Total Wins:
          <span>{{pv.player.ranks.firsts}} <i class="fa fa-trophy trophy-gold"></i></span>
          <span>{{pv.player.ranks.seconds}} <i class="fa fa-trophy trophy-silver"></i></span>
          <span>{{pv.player.ranks.thirds}} <i class="fa fa-trophy trophy-bronze"></i></span>
        </p>
        <p ng-show="pv.player.bonusChips != null">Bonus Chips: {{pv.player.bonusChips}}</p>
        <p>Average Rank: {{pv.player.ranks.average | number:0}}</p>
        <p>Best Rank: {{pv.player.ranks.best}}</p>
        <p>Worst Rank: {{pv.player.ranks.worst}}</p>
      </div>
      <p>Shout Outs: {{pv.player.shoutOuts}}</p>
      <center ng-show="pv.player.games.length">
        <p>Games Played: {{pv.player.games.length}}</p>
      </center>
      <md-button ng-repeat="game in pv.player.games | orderBy : '-gameStartTime' | limitTo: 5" ui-sref="games.view({ id : game._id })">
        {{game.event.venue.name}} -- {{game.gameStartTime | date: 'short'}}
      </md-button>
    </md-card-content>
    <md-card-actions layout="row" layout-align="end center">
      <md-button ng-show="players.permissions.EDIT_PLAYER"
        ui-sref="players.manage({ id: pv.player._id })">
        Edit Player
      </md-button>
      <md-button ng-show="players.permissions.DELETE_PLAYER"
        ng-click="pv.removePlayer(pv.player)">
        Delete Player
      </md-button>
    </md-card-actions>
    <md-card-actions layout="row" layout-align="end center">
      <md-button ng-click="pv.shoutOut(pv.player._id)">Give Shout Out</md-button>
    </md-card-actions>
  </md-card>
</md-content>
