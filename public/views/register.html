<div>
  <form name="rg.forms.registerForm">
    <div layout-gt-xs="row" class="rhp-input-group">
      <md-input-container class="md-block" flex-gt-xs>
        <label>User Name</label>
        <input required ng-model="rg.user.username" name="username" ng-change="rg.reset(rg.forms.registerForm.username, 'userTaken')">
        <div ng-class="{ 'rhp-messages-active' : rg.forms.registerForm.username.$dirty }" ng-messages="rg.forms.registerForm.username.$error" ng-if="rg.forms.registerForm.username.$dirty">
          <div ng-message="required">
            You must provide a Username.
          </div>
          <div ng-message="userTaken">
            This username is already taken.
          </div>
        </div>
      </md-input-container>
    </div>
    <div layout-gt-xs="row" class="rhp-input-group">
      <md-input-container class="md-block" flex-gt-xs>
        <label>Registration Key</label>
        <input required ng-model="rg.user.tokenId" name="token" ng-change="rg.reset(rg.forms.registerForm.token, 'invalidToken')">
        <div ng-class="{ 'rhp-messages-active' : rg.forms.registerForm.username.$dirty }"  ng-messages="rg.forms.registerForm.token.$error" ng-if="rg.forms.registerForm.token.$dirty">
          <div ng-message="required">
            You must provide a token.
          </div>
          <div ng-message="invalidToken">
            That is not the right token.
          </div>
        </div>
      </md-input-container>
    </div>
    <div layout-gt-xs="row" class="rhp-input-group">
      <md-input-container class="md-block" flex-gt-xs>
        <label>Password</label>
        <input required type="password" ng-model="rg.user.password" name="password" minlength="8">
        <div ng-class="{ 'rhp-messages-active' : rg.forms.registerForm.username.$dirty }"  ng-messages="rg.forms.registerForm.password.$error" ng-if="rg.forms.registerForm.password.$dirty">
          <div ng-message="required">
            You must provide a password.
          </div>
          <div ng-message="minlength">
            Password must be at least 8 characters.
          </div>
        </div>
      </md-input-container>
    </div>
    <div layout-gt-xs="row" class="rhp-input-group">
      <md-input-container class="md-block" flex-gt-xs>
        <label>Repeat Password</label>
        <input required type="password" ng-model="rg.user.passwordConfirm" name="passwordConfirm" password-match="rg.user.password">
        <div ng-class="{ 'rhp-messages-active' : rg.forms.registerForm.username.$dirty }"  ng-messages="rg.forms.registerForm.passwordConfirm.$error" ng-if="rg.forms.registerForm.passwordConfirm.$dirty">
          <div ng-message="required" ng-show="rg.user.password">
            You must confirm your password.
          </div>
          <div ng-message="passwordMatch" ng-show="rg.user.passwordConfirm.length >= rg.user.password.length">
            Passwords do not match.
          </div>
        </div>
      </md-input-container>
    </div>
    <div layout="row" layout-align="center">
      <md-button class="md-raised md-default" ng-click="rg.register();" ng-disabled="rg.user.$$saving || rg.forms.registerForm.$invalid">Register</md-button>
      <md-button class="md-raised md-default" ng-click="rg.cancel();">Cancel</md-button>
    </div>
  </form>
</div>
