<div>
  <form name="rg.forms.registerForm">
    <div layout-gt-xs="row">
      <md-input-container class="md-block" flex-gt-xs>
        <label>User Name</label>
        <input required ng-model="rg.user.username" name="username">
      </md-input-container>
      <div ng-messages="rg.forms.registerForm.username.$error" ng-show="rg.forms.registerForm.username.$dirty">
        <div ng-message="required">
          You must provide a Username.
        </div>
      </div>
    </div>
    <div layout-gt-xs="row">
      <md-input-container class="md-block" flex-gt-xs>
        <label>Registration Key</label>
        <input required ng-model="rg.user.tokenId" name="token" ng-change="rg.forms.registerForm.token.$invalid ? rg.reset(rg.forms.registerForm.token, 'invalidToken') : null">
      </md-input-container>
      <div ng-messages="rg.forms.registerForm.token.$error" ng-show="rg.forms.registerForm.token.$dirty">
        <div ng-message="required">
          You must provide a token.
        </div>
        <div ng-message="invalidToken">
          That is not the right token.
        </div>
      </div>
    </div>
    <div layout-gt-xs="row">
      <md-input-container class="md-block" flex-gt-xs>
        <label>Password</label>
        <input required type="password" ng-model="rg.user.password" name="password" minlength="8">
      </md-input-container>
      <div ng-messages="rg.forms.registerForm.password.$error" ng-show="rg.forms.registerForm.password.$dirty">
        <div ng-message="required">
          You must provide a password.
        </div>
        <div ng-message="minlength">
          Password must be at least 8 characters.
        </div>
      </div>
    </div>
    <div layout-gt-xs="row">
      <md-input-container class="md-block" flex-gt-xs>
        <label>Repeat Password</label>
        <input required type="password" ng-model="rg.user.passwordConfirm" name="passwordConfirm" password-match="rg.user.password">
      </md-input-container>
      <div ng-messages="rg.forms.registerForm.passwordConfirm.$error" ng-show="rg.forms.registerForm.passwordConfirm.$dirty">
        <div ng-message="required" ng-show="rg.user.password">
          You must confirm your password.
        </div>
        <div ng-message="passwordMatch" ng-show="rg.user.passwordConfirm.length >= rg.user.password.length">
          Passwords do not match.
        </div>
      </div>
    </div>
    <div layout="row" layout-align="center">
      <md-button class="md-raised md-default" ng-click="rg.register();" ng-disabled="rg.forms.registerForm.$invalid">Register</md-button>
      <md-button class="md-raised md-default" ng-click="rg.cancel();">Cancel</md-button>
    </div>
  </form>
</div>
